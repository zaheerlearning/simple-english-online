<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quran Companion</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="/quran/manifest.json">
<meta name="theme-color" content="#166534">

<link href="https://fonts.googleapis.com/css2?family=Amiri&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:linear-gradient(to bottom,#f0fdf4,#ecfdf5);
}

header{
  background:linear-gradient(135deg,#14532d,#064e3b);
  color:white;
  padding:20px;
  text-align:center;
  box-shadow:0 4px 15px rgba(0,0,0,.15);
}

main{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.ayah{
  background:white;
  padding:25px;
  border-radius:20px;
  margin-bottom:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

.arabic{
  font-family:'Amiri',serif;
  font-size:28px;
  direction:rtl;
  text-align:right;
  line-height:2;
}

.translation{
  margin-top:10px;
  color:#374151;
}
</style>
</head>

<body>

<header>
<h2>Quran Companion</h2>
<select id="surahSelect"></select>
<button onclick="loadSurah(surahSelect.value)">Load</button>
</header>

<main>
<div id="ayahContainer"></div>
</main>

<script>
let verses=[];

async function loadSurahNames(){
  const res=await fetch("https://api.quran.com/api/v4/chapters");
  const data=await res.json();

  data.chapters.forEach(ch=>{
    let opt=document.createElement("option");
    opt.value=ch.id;
    opt.textContent=ch.id+". "+ch.name_simple;
    surahSelect.appendChild(opt);
  });

  loadSurah(1);
}

async function loadSurah(id){
  const res=await fetch(
    `https://api.quran.com/api/v4/verses/by_chapter/${id}?translations=20&fields=text_uthmani`
  );
  const data=await res.json();
  verses=data.verses;
  render();
}

function render(){
  ayahContainer.innerHTML="";
  verses.forEach(v=>{
    ayahContainer.innerHTML+=`
      <div class="ayah">
        <div class="arabic">${v.text_uthmani}</div>
        <div class="translation">${v.translations[0].text}</div>
      </div>
    `;
  });
}

loadSurahNames();

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/quran/service-worker.js');
}
</script>

</body>
</html>
